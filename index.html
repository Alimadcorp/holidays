<!doctype html>
<html lang=en>
<head>
<meta charset=UTF-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<link rel="icon" href="https://cdn-icons-png.flaticon.com/512/6581/6581528.png">
<meta property="og:title" content="HolidayMad">
<meta property="og:site_name" content="HolidayMad">
<meta property="og:url" content="https://alimadcorp.github.io/holidays">
<meta property="og:description" content="View and browse holidays for different countries over different years.">
<meta property="og:type" content="website">
<meta property="og:image" content="https://cdn-icons-png.flaticon.com/512/6581/6581528.png">
<title>Holiday Events</title>
<style>body{font-family:"Segoe UI",Roboto,Oxygen,Ubuntu,sans-serif;margin:0;padding:0;background-color:#121212;color:#e0e0e0;line-height:1.5;overflow-x:hidden}#title{background-color:#1a1a1a;padding:2rem 1rem;box-shadow:0 4px 12px rgba(0,0,0,.2);margin-bottom:2rem;width:100%;max-width:100%}h1,h2{text-align:center;color:#fff;margin-bottom:1.2rem;}h1{font-size:2.2rem;margin-top:0}h2{font-size:1.8rem;margin-top:2rem;position:relative;display:inline-block}h2:after{content:"";position:absolute;width:40%;height:3px;background:#2962ff;bottom:-8px;left:30%;border-radius:2px}header{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:15px;max-width:1000px;margin:0 auto}label{font-weight:500;margin-right:5px;color:#a0a0a0}button,input,select{padding:12px 16px;border:1px solid #444;border-radius:8px;font-size:1rem;transition:all .3s ease}input,select{background-color:#2d2d2d;color:#e0e0e0;width:150px;margin:0 5px}input:focus,select:focus{outline:0;border-color:#4d90fe;box-shadow:0 0 0 3px rgba(77,144,254,.3)}input::placeholder{color:#777}button{background-color:#2962ff;color:#fff;font-weight:600;border:none;cursor:pointer;padding:12px 30px;box-shadow:0 4px 6px rgba(0,0,0,.3);margin-top:10px;min-width:200px}button:hover{background-color:#0039cb;transform:translateY(-2px);box-shadow:0 6px 12px rgba(0,0,0,.3)}button:active{transform:translateY(1px)}#results{max-width:1200px;margin:0 auto;padding:0 20px;text-align:center}#allh,#tod{max-width:100%}#tod{margin-bottom:2rem;display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:25px;justify-content:center}#tod .holiday-box{border-left-color:#2962ff;background:linear-gradient(135deg,#0d47a1,#1a237e)}#allh{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:30px;margin:0 auto;max-width:1200px;padding:0 15px}.holiday-box{background-color:#1e1e1e;padding:1.4rem;border-radius:12px;box-shadow:0 4px 8px rgba(0,0,0,.15);transition:all .3s ease;border-left:4px solid #555;text-align:left;position:relative;overflow:hidden;margin-bottom:5px}.holiday-box:hover{box-shadow:0 8px 16px rgba(0,0,0,.2);z-index:1;background-color:#252525;background:linear-gradient(13deg,#3c5307,#1a7408)}.holiday-box:hover::after{opacity:.15}.holiday-box::after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,transparent,rgba(255,255,255,.1));opacity:0;transition:opacity .3s ease}.today{background:linear-gradient(135deg,#0d47a1,#1a237e);border-left-color:#64b5f6}.today:hover{background:linear-gradient(135deg,#0a3d8f,#141e64)}.optional{color:#64b5f6;border-left-color:#64b5f6}.public{color:#81c784;border-left-color:#81c784}.holiday-box a{color:inherit;text-decoration:none;font-size:1.2rem;display:block;margin-bottom:.8rem;font-weight:600;transition:color .2s ease}.holiday-box a:hover{color:#4d90fe;text-shadow:0 0 8px rgba(77,144,254,.5)}.holiday-box p{margin:.6rem 0;font-size:.95rem;line-height:1.5}footer{text-align:center;margin-top:3rem;padding:1.5rem;color:#888;font-size:.9rem;background-color:#1a1a1a;width:100%}footer a{color:#4d90fe;text-decoration:none;transition:color .2s}footer a:hover{color:#82b1ff}hr{border:0;height:1px;background:linear-gradient(to right,transparent,#444,transparent);margin:2rem auto;max-width:80%}.loader{display:none;text-align:center;margin:2rem auto;color:#4d90fe}.error{color:#ff6b6b;text-align:center;font-weight:500;padding:1rem;background-color:rgba(255,107,107,.1);border-radius:6px;max-width:800px;margin:1rem auto}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes pulse{0%{box-shadow:0 0 0 0 rgba(77,144,254,.7)}70%{box-shadow:0 0 0 10px rgba(77,144,254,0)}100%{box-shadow:0 0 0 0 rgba(77,144,254,0)}}.fade-in{animation:fadeIn .5s ease-in}.holiday-box:nth-child(odd){animation-delay:.1s}.holiday-box:nth-child(2n){animation-delay:.2s}@media (max-width:900px){#allh,#tod{grid-template-columns:repeat(auto-fill,minmax(300px,1fr))}}@media (max-width:768px){header{padding:1rem}input,select{width:80%;margin:5px 0;max-width:80%}button{width:80%}#allh,#tod{grid-template-columns:1fr}}@media (min-width:1400px){#allh,#tod{grid-template-columns:repeat(4,1fr)}}@media (min-width:1800px){#allh,#tod{grid-template-columns:repeat(5,1fr)}}@media (min-width:2200px){#allh,#tod{grid-template-columns:repeat(6,1fr)}}</style>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const countryInput = document.getElementById("country");
        const yearInput = document.getElementById("year");
        const resultDiv = document.getElementById("results");
        const apiKey = "e7ICcADPFKhXHWD7O7XuJ7a7WntpJ6Zr";
        const today = new Date().toISOString().split("T")[0];
        yearInput.value = new Date().getFullYear();

        document
          .getElementById("fetchBtn")
          .addEventListener("click", onFetch);
        document.addEventListener("keydown", (e) => {var code = (e.keyCode ? e.keyCode : e.which);if(code == 13) {onFetch();}});
        async function onFetch () {
            let country = countryInput.value.toUpperCase();
            if(country == ""){resultDiv.innerHTML = `<p class="error">Please enter a country name</p>`; return;}
            if(country.length > 2){
                let nc = await getCountryCode(country);
                if(nc != null && nc != undefined){
                    country = nc;
                    countryInput.value = nc;
                }
            }
            const year = yearInput.value;
            localStorage.setItem("holidayCC", country);

            if (
              localStorage.getItem(
                `cache_calendarific&country=${country}&year=${year}`
              ) != null
            ) {
              onData(
                JSON.parse(
                  localStorage.getItem(
                    `cache_calendarific&country=${country}&year=${year}`
                  )
                )
              );
              return;
            }

            fetch(
              `https://calendarific.com/api/v2/holidays?api_key=${apiKey}&country=${country}&year=${year}`
            )
              .then((response) => response.json())
              .then((data) => {
                localStorage.setItem(
                  `cache_calendarific&country=${country}&year=${year}`,
                  JSON.stringify(data)
                );
                onData(data);
              })
              .catch(
                (error) =>
                  (resultDiv.innerHTML = `<p class="error">Error fetching data</p>`)
              );
          }
        async function onData(data) {
          let holidays = data.response.holidays;
          let todayHolidays = holidays.filter((h) => h.date.iso === today);

          resultDiv.innerHTML = "";

          if (todayHolidays.length > 0) {
            resultDiv.innerHTML += `<div id="tod"><h2>Today's Holidays</h2>`;
            todayHolidays.forEach((holiday) => {
              resultDiv.innerHTML += createHolidayBox(holiday, true);
            });
            resultDiv.innerHTML += `</div><br><hr>`;
          } else {
            resultDiv.innerHTML += `<div id="tod"><h2>Today's Holidays</h2><p>No holidays today.</p></div><br><hr>`;
          }

          resultDiv.innerHTML += `<div id="allh"><h2>All Holidays</h2>`;
            let delay = 0;
        holidays.forEach((holiday, index) => {
            setTimeout(() => {
            resultDiv.innerHTML += createHolidayBox(holiday, false);
            }, delay);
            delay += 30;
        });
          resultDiv.innerHTML += `</div><hr/>`;
        }

        function createHolidayBox(holiday, isToday) {
          let typeClass = holiday.primary_type.includes("Optional")
            ? "optional"
            : "public";
            let states = "";
            if(holiday.states != "All"){
            let starr = [];
            for(let i = 0; i < holiday.states.length; i++){
                starr.push(holiday.states[i].name);
            }
        states =
            holiday.states && holiday.states != "All"
              ? ` States: ${starr.join(", ")}`
              : "";}
          return `<div class="holiday-box ${isToday ? "today" : ""}"><a href="${holiday.canonical_url}" target="_blank"><strong class="${typeClass}">${holiday.name}</strong></a><p>Date: ${holiday.date.iso}</p><p>${states}</p><p>${holiday.description}</p><p>Type: ${holiday.primary_type}</p><p>Country: ${holiday.country.name}</p></div>`;
        }

        setTimeout(() => {
          if (localStorage.getItem("holidayCC") != null) {
            document.getElementById("country").value =
              localStorage.getItem("holidayCC");
            return;
          }
          fetch("https://api.country.is")
            .then((response) => response.json())
            .then((data) => {
              countryInput.value = data.country;
              localStorage.setItem("holidayCC", data.country);
            })
            .catch(() => resultDiv.innerHTML = `<p class="error">Could not fetch country code</p>`);
        }, 200);
      });
      async function getCountryCode(countryName) {
        if (/^[A-Z]{2}$/.test(countryName.toUpperCase())) {
          return countryName.toUpperCase();
        }
        let res = "";
        if(localStorage.getItem("cache_cc"+countryName) != null){
            return localStorage.getItem("cache_cc"+countryName);
        }else{
        return await fetch(
          `https://restcountries.com/v3.1/name/${encodeURIComponent(
            countryName
          )}`
        )
          .then((response) => response.json())
          .then((data) => {
            if (data && data.length > 0 && data[0].cca2) {
              res = data[0].cca2;
              return res;
            } else {
              throw new Error("Country not found");
            }
          });
      }}
</script>
</head>
<body>
<header id=title>
<h1>Search for Holiday Events</h1>
<label for=country>Enter Country: </label>
<input type=name id=country name=country placeholder="CN, US, PK, etc.">
<label for=year>&nbsp;&nbsp;Enter Year: </label>
<input type=number id=year>
<button id=fetchBtn>Get Holidays</button>
</header>
<hr>
<div id=results></div>
<footer>
Made by
<a href=https://alimadcorp.github.io><strong>Muhammad Ali</strong></a>
</footer>
</body>
</html>